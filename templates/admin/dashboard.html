{% extends "base.html" %}

{% block title %}Admin Dashboard - Coffee Shop{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h1>Admin Dashboard</h1>
        <p>Welcome back, {{ session.first_name }}!</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <h3>{{ total_orders }}</h3>
            <p>Total Orders</p>
        </div>
        
        <div class="stat-card">
            <h3>${{ "%.2f"|format(total_revenue) }}</h3>
            <p>Total Revenue</p>
        </div>
        
        <div class="stat-card">
            <h3>{{ total_customers }}</h3>
            <p>Total Customers</p>
        </div>
        
        <div class="stat-card">
            <h3>{{ total_coffees }}</h3>
            <p>Total Coffees</p>
        </div>
    </div>

    <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="action-buttons">
            <a href="{{ url_for('add_coffee') }}" class="btn-primary">
                <i class="fas fa-plus"></i> Add New Coffee
            </a>
            <a href="{{ url_for('admin_coffees') }}" class="btn-primary">
                <i class="fas fa-coffee"></i> Manage Coffees
            </a>
            <a href="{{ url_for('admin_orders') }}" class="btn-primary">
                <i class="fas fa-clipboard-list"></i> View Orders
            </a>
        </div>
    </div>

    <div class="recent-orders">
        <h2>Recent Orders</h2>
        {% if recent_orders %}
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in recent_orders %}
                    <tr>
                        <td>#{{ order[0] }}</td>
                        <td>{{ order[5] }} {{ order[6] }}</td>
                        <td>${{ "%.2f"|format(order[2]) }}</td>
                        <td>
                            <span class="status-badge status-{{ order[3] }}">
                                {{ order[3]|title }}
                            </span>
                        </td>
                        <td>{{ order[4] }}</td>
                        <td>
                            <a href="{{ url_for('admin_order_details', order_id=order[0]) }}" 
                               class="btn-action btn-view">
                                View
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p>No orders yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}